{"ast":null,"code":"import e from \"react\";\nexport default function (t, r) {\n  void 0 === t && (t = 6e4), void 0 === r && (r = 1e3);\n\n  var n = e.useState(0),\n      u = n[0],\n      c = n[1],\n      a = e.useRef({}),\n      i = function e(t) {\n    a.current.started || (a.current.started = t, a.current.lastInterval = t);\n    var n = Math.min(r, a.current.timeLeft || Infinity);\n    t - a.current.lastInterval >= n && (a.current.lastInterval += n, c(function (e) {\n      return a.current.timeLeft = e - n, a.current.timeLeft;\n    })), t - a.current.started < a.current.timeToCount ? a.current.requestId = window.requestAnimationFrame(e) : (a.current = {}, c(0));\n  },\n      o = e.useCallback(function (e) {\n    window.cancelAnimationFrame(a.current.requestId);\n    var r = void 0 !== e ? e : t;\n    a.current.started = null, a.current.lastInterval = null, a.current.timeToCount = r, a.current.requestId = window.requestAnimationFrame(i), c(r);\n  }, []),\n      s = e.useCallback(function () {\n    window.cancelAnimationFrame(a.current.requestId), a.current.started = null, a.current.lastInterval = null, a.current.timeToCount = a.current.timeLeft;\n  }, []),\n      l = e.useCallback(function () {\n    !a.current.started && a.current.timeLeft > 0 && (window.cancelAnimationFrame(a.current.requestId), a.current.requestId = window.requestAnimationFrame(i));\n  }, []),\n      m = e.useCallback(function () {\n    a.current.timeLeft && (window.cancelAnimationFrame(a.current.requestId), a.current = {}, c(0));\n  }, []),\n      d = e.useMemo(function () {\n    return {\n      start: o,\n      pause: s,\n      resume: l,\n      reset: m\n    };\n  }, []);\n\n  return e.useEffect(function () {\n    return function () {\n      return window.cancelAnimationFrame(a.current.requestId);\n    };\n  }, []), [u, d];\n}","map":{"version":3,"mappings":"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","names":["timeToCount","interval","React","useState","timeLeft","setTimeLeft","timer","useRef","run","ts","current","started","lastInterval","localInterval","Math","min","Infinity","requestId","window","requestAnimationFrame","start","useCallback","ttc","cancelAnimationFrame","newTimeToCount","undefined","pause","resume","reset","actions","useMemo","useEffect"],"sources":["../src/index.js"],"sourcesContent":["import React from 'react';\n\nconst useCountDown = (timeToCount = 60 * 1000, interval = 1000) => {\n  const [timeLeft, setTimeLeft] = React.useState(0);\n  const timer = React.useRef({});\n\n  const run = (ts) => {\n    if (!timer.current.started) {\n      timer.current.started = ts;\n      timer.current.lastInterval = ts;\n    }\n\n    const localInterval = Math.min(interval, (timer.current.timeLeft || Infinity));\n    if ((ts - timer.current.lastInterval) >= localInterval) {\n      timer.current.lastInterval += localInterval;\n      setTimeLeft((timeLeft) => {\n        timer.current.timeLeft = timeLeft - localInterval;\n        return timer.current.timeLeft;\n      });\n    }\n\n    if (ts - timer.current.started < timer.current.timeToCount) {\n      timer.current.requestId = window.requestAnimationFrame(run);\n    } else {\n      timer.current = {};\n      setTimeLeft(0);\n    }\n  }\n\n  const start = React.useCallback(\n    (ttc) => {\n      window.cancelAnimationFrame(timer.current.requestId);\n\n      const newTimeToCount = ttc !== undefined ? ttc : timeToCount\n      timer.current.started = null;\n      timer.current.lastInterval = null;\n      timer.current.timeToCount = newTimeToCount;\n      timer.current.requestId = window.requestAnimationFrame(run);\n\n      setTimeLeft(newTimeToCount);\n    },\n    [],\n  );\n\n  const pause = React.useCallback(\n    () => {\n      window.cancelAnimationFrame(timer.current.requestId);\n      timer.current.started = null;\n      timer.current.lastInterval = null;\n      timer.current.timeToCount = timer.current.timeLeft;\n    },\n    [],\n  );\n\n  const resume = React.useCallback(\n    () => {\n      if (!timer.current.started && timer.current.timeLeft > 0) {\n        window.cancelAnimationFrame(timer.current.requestId);\n        timer.current.requestId = window.requestAnimationFrame(run);\n      }\n    },\n    [],\n  );\n\n  const reset = React.useCallback(\n    () => {\n      if (timer.current.timeLeft) {\n        window.cancelAnimationFrame(timer.current.requestId);\n        timer.current = {};\n        setTimeLeft(0);\n      }\n    },\n    [],\n  );\n\n  const actions = React.useMemo(\n    () => ({ start, pause, resume, reset }),\n    [],\n  );\n\n  React.useEffect(() => {\n    return () => window.cancelAnimationFrame(timer.current.requestId);\n  }, []);\n\n  return [timeLeft, actions];\n}\n\nexport default useCountDown;\n"]},"metadata":{},"sourceType":"module"}